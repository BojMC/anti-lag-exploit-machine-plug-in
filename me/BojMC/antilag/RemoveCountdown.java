package me.BojMC.antilag;

import org.bukkit.scheduler.*;
import org.bukkit.entity.*;
import java.util.*;

public class RemoveCountdown extends BukkitRunnable
{
    private final AntiLag plugin;
    private int counter;
    private Collection<Entity> ids;
    
    public RemoveCountdown(final AntiLag plugin, final int counter, final Collection<Entity> ids) {
        this.plugin = plugin;
        this.ids = ids;
        if (counter < 1) {
            throw new IllegalArgumentException("counter must be greater than 1");
        }
        this.counter = counter;
    }
    
    public void run() {
        if (this.counter > 0) {
            this.plugin.getServer().broadcastMessage(String.valueOf(this.plugin.prefix) + this.plugin.getConfig().getString("countdown_message").replace("{time}", new StringBuilder(String.valueOf(this.counter--)).toString()));
        }
        else {
            this.plugin.getServer().broadcastMessage(String.valueOf(this.plugin.prefix) + this.plugin.getConfig().getString("countdown_over"));
            for (final Entity e : this.ids) {
                e.remove();
            }
            this.cancel();
        }
    }
}
